# Crypto HFT System

[![Rust](https://img.shields.io/badge/rust-2021-orange.svg)](https://www.rust-lang.org/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

é«˜æ€§èƒ½åŠ å¯†è´§å¸é«˜é¢‘äº¤æ˜“ç³»ç»Ÿï¼ŒåŸºäº Rust å®ç°ï¼Œé‡‡ç”¨ TDDï¼ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰æ¨¡å¼å¼€å‘ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒäº¤æ˜“åŠŸèƒ½

- **å¤šäº¤æ˜“æ‰€æ”¯æŒ**: Binance, Bybit, OKX, Gate, Hyperliquid, dYdX, Aster
- **åšå¸‚ç­–ç•¥**: è‡ªåŠ¨æŠ¥ä»·ã€åº“å­˜ç®¡ç†ã€ä»·å·®ä¼˜åŒ–
- **å¥—åˆ©ç­–ç•¥**: è·¨äº¤æ˜“æ‰€ä»·å·®å¥—åˆ©ã€ä¸‰è§’å¥—åˆ©
- **æŠ•èµ„ç»„åˆå†å¹³è¡¡**: è‡ªåŠ¨è°ƒä»“ã€ç›®æ ‡é…ç½®ç®¡ç†
- **äº‹ä»¶é©±åŠ¨ç­–ç•¥**: åŸºäºå¸‚åœºäº‹ä»¶çš„å¿«é€Ÿå“åº”
- **é¢„æµ‹ç­–ç•¥**: åŸºäºæŠ€æœ¯æŒ‡æ ‡çš„ä»·æ ¼é¢„æµ‹

### é£é™©ç®¡ç†

- **å®æ—¶é£æ§å¼•æ“**: å¤šè§„åˆ™é£é™©æ£€æŸ¥
- **å½±å­è´¦æœ¬**: å®æ—¶æŒä»“å’Œ P&L è·Ÿè¸ª
- **ä»“ä½é™åˆ¶**: æœ€å¤§æŒä»“ã€å•ç¬”è®¢å•é™åˆ¶
- **æŸå¤±æ§åˆ¶**: æ—¥äºæŸé™é¢ã€å›æ’¤ä¿æŠ¤

### è®¢å•ç®¡ç†ç³»ç»Ÿ (OMS)

- **æ™ºèƒ½è®¢å•è·¯ç”±**: æœ€ä¼˜æ‰§è¡Œè·¯å¾„é€‰æ‹©
- **è‡ªé€‚åº”é™é€Ÿå™¨**: åŠ¨æ€è°ƒæ•´ API è°ƒç”¨é¢‘ç‡
- **è®¢å•ç”Ÿå‘½å‘¨æœŸç®¡ç†**: å®Œæ•´çš„è®¢å•çŠ¶æ€è·Ÿè¸ª

### å®æ—¶ç³»ç»Ÿ

- **é«˜æ€§èƒ½äº‹ä»¶å¾ªç¯**: å¼‚æ­¥äº‹ä»¶å¤„ç†
- **ä¿¡å·ç”Ÿæˆå™¨**: ç­–ç•¥ä¿¡å·åˆ°è®¢å•è½¬æ¢
- **æ€§èƒ½ç›‘æ§**: å»¶è¿Ÿã€ååé‡ã€æˆåŠŸç‡è¿½è¸ª

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æ“ä½œ | æ€§èƒ½ |
|------|------|
| åˆ›å»º OrderBook | ~27 ns |
| è·å–æœ€ä½³ä¹°å–ä»· | ~25 ns |
| è·å–å‰20æ¡£ä»·æ ¼ | ~322 ns |
| åº”ç”¨1000æ¡£å¿«ç…§ | ~121 Î¼s |
| åº”ç”¨1000æ¬¡å¢é‡æ›´æ–° | ~182 Î¼s |

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ lib.rs                    # åº“å…¥å£
â”œâ”€â”€ main.rs                   # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ binance_dry_run*.rs       # Binance Dry-Run æ¨¡å¼
â”‚
â”œâ”€â”€ core/                     # æ ¸å¿ƒäº‹ä»¶å’Œç±»å‹å®šä¹‰
â”‚   â””â”€â”€ events.rs             # äº¤æ˜“äº‹ä»¶ã€è®¢å•ã€ä¿¡å·
â”‚
â”œâ”€â”€ types/                    # åŸºç¡€ç±»å‹
â”‚   â”œâ”€â”€ price.rs              # Price ç±»å‹ (é«˜ç²¾åº¦)
â”‚   â”œâ”€â”€ size.rs               # Size ç±»å‹ (é«˜ç²¾åº¦)
â”‚   â””â”€â”€ symbol.rs             # Symbol äº¤æ˜“å¯¹ç±»å‹
â”‚
â”œâ”€â”€ orderbook/                # è®¢å•ç°¿
â”‚   â”œâ”€â”€ orderbook.rs          # é«˜æ€§èƒ½è®¢å•ç°¿å®ç°
â”‚   â””â”€â”€ types.rs              # OrderBookLevel, Snapshot, Delta
â”‚
â”œâ”€â”€ exchanges/                # äº¤æ˜“æ‰€é€‚é…å™¨
â”‚   â”œâ”€â”€ binance.rs            # Binance WebSocket/REST
â”‚   â”œâ”€â”€ bybit.rs              # Bybit é€‚é…å™¨
â”‚   â”œâ”€â”€ okx.rs                # OKX é€‚é…å™¨
â”‚   â”œâ”€â”€ gate.rs               # Gate.io é€‚é…å™¨
â”‚   â”œâ”€â”€ hyperliquid.rs        # Hyperliquid é€‚é…å™¨
â”‚   â”œâ”€â”€ dydx.rs               # dYdX é€‚é…å™¨
â”‚   â””â”€â”€ connection_manager.rs # è¿æ¥ç®¡ç†å™¨
â”‚
â”œâ”€â”€ connectors/               # æ‰§è¡Œè¿æ¥å™¨
â”‚   â”œâ”€â”€ binance.rs            # Binance æ¶ˆæ¯è§£æ
â”‚   â”œâ”€â”€ dry_run.rs            # Dry-Run æ¨¡æ‹Ÿæ‰§è¡Œ
â”‚   â””â”€â”€ mock.rs               # Mock æµ‹è¯•è¿æ¥å™¨
â”‚
â”œâ”€â”€ strategies/               # äº¤æ˜“ç­–ç•¥
â”‚   â”œâ”€â”€ market_making.rs      # åšå¸‚ç­–ç•¥
â”‚   â”œâ”€â”€ arbitrage.rs          # å¥—åˆ©ç­–ç•¥
â”‚   â”œâ”€â”€ portfolio_rebalance.rs # æŠ•èµ„ç»„åˆå†å¹³è¡¡
â”‚   â”œâ”€â”€ event_driven.rs       # äº‹ä»¶é©±åŠ¨ç­–ç•¥
â”‚   â””â”€â”€ prediction.rs         # é¢„æµ‹ç­–ç•¥
â”‚
â”œâ”€â”€ risk/                     # é£é™©ç®¡ç†
â”‚   â”œâ”€â”€ rules.rs              # é£æ§è§„åˆ™å¼•æ“
â”‚   â””â”€â”€ shadow_ledger.rs      # å½±å­è´¦æœ¬
â”‚
â”œâ”€â”€ oms/                      # è®¢å•ç®¡ç†ç³»ç»Ÿ
â”‚   â”œâ”€â”€ order_manager.rs      # è®¢å•ç®¡ç†å™¨
â”‚   â””â”€â”€ rate_limiter.rs       # è‡ªé€‚åº”é™é€Ÿå™¨
â”‚
â”œâ”€â”€ realtime/                 # å®æ—¶å¤„ç†
â”‚   â”œâ”€â”€ event_loop.rs         # äº‹ä»¶å¾ªç¯
â”‚   â”œâ”€â”€ signal_generator.rs   # ä¿¡å·ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ order_executor.rs     # è®¢å•æ‰§è¡Œå™¨
â”‚   â”œâ”€â”€ risk_manager.rs       # å®æ—¶é£æ§
â”‚   â””â”€â”€ performance_monitor.rs # æ€§èƒ½ç›‘æ§
â”‚
â”œâ”€â”€ indicators/               # æŠ€æœ¯æŒ‡æ ‡
â”‚   â”œâ”€â”€ orderbook_indicators.rs # è®¢å•ç°¿æŒ‡æ ‡
â”‚   â””â”€â”€ trade_flow_indicators.rs # äº¤æ˜“æµæŒ‡æ ‡
â”‚
â”œâ”€â”€ monitoring/               # ç›‘æ§ç³»ç»Ÿ
â”‚   â”œâ”€â”€ alerts.rs             # å‘Šè­¦ç³»ç»Ÿ
â”‚   â”œâ”€â”€ health.rs             # å¥åº·æ£€æŸ¥
â”‚   â””â”€â”€ metrics.rs            # æŒ‡æ ‡æ”¶é›†
â”‚
â”œâ”€â”€ security/                 # å®‰å…¨æ¨¡å—
â”‚   â””â”€â”€ api_keys.rs           # API å¯†é’¥ç®¡ç†
â”‚
â””â”€â”€ traits/                   # æ ¸å¿ƒ Traits
    â”œâ”€â”€ market_data.rs        # MarketDataStream
    â”œâ”€â”€ execution.rs          # ExecutionClient
    â””â”€â”€ strategy.rs           # Strategy Traits
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Rust 1.70+ (æ¨èä½¿ç”¨ rustup)
- ç½‘ç»œè¿æ¥ (ç”¨äºè¿æ¥äº¤æ˜“æ‰€ WebSocket)

### ç¼–è¯‘

```bash
# ç¼–è¯‘ release ç‰ˆæœ¬
cargo build --release

# è¿è¡Œæµ‹è¯•
cargo test

# è¿è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•
cargo bench
```

### è¿è¡Œ Binance Dry-Run åšå¸‚ç­–ç•¥

```bash
# ç¼–è¯‘
cargo build --bin binance_dry_run_market_making --release

# è¿è¡Œ (è¿æ¥ Binance å®æ—¶è¡Œæƒ…ï¼Œæ¨¡æ‹Ÿåšå¸‚)
cargo run --bin binance_dry_run_market_making --release
```

è¾“å‡ºç¤ºä¾‹:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ¯ Binance BTCUSDT Market Making (Dry-Run Mode)            â•‘
â•‘ ğŸ“Š Real-time market data will be displayed below          â•‘
â•‘ ğŸ’¡ Strategy orders will be printed but not executed       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ“ˆ ORDER BOOK UPDATE (è®¢å•ç°¿æ›´æ–°)                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Symbol:      BTCUSDT                                       â•‘
â•‘ Best Bid:    91071.70 @ 3.04                               â•‘
â•‘ Best Ask:    91071.71 @ 1.82                               â•‘
â•‘ Spread:      0.01                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### ç­–ç•¥é…ç½®

åœ¨ `src/binance_dry_run_market_making.rs` ä¸­å¯ä»¥è°ƒæ•´ç­–ç•¥å‚æ•°:

```rust
let strategy = MarketMakingStrategy::new(
    Price::from_str("1.0")?,    // ç›®æ ‡ä»·å·®: $1.0
    Size::from_str("0.001")?,   // åŸºç¡€è®¢å•å¤§å°: 0.001 BTC
    Size::from_str("0.1")?,     // æœ€å¤§æŒä»“: 0.1 BTC
    5,                          // æœ€å¤§è®¢å•å±‚çº§: 5
    Duration::from_millis(1000), // è®¢å•åˆ·æ–°æ—¶é—´: 1ç§’
);
```

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
cargo test --lib performance_monitor
cargo test --lib orderbook

# è¿è¡Œé›†æˆæµ‹è¯•
cargo test --test test_phase13_k_verification

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–
cargo test -- --nocapture
```

### æµ‹è¯•ç»Ÿè®¡

- **34 ä¸ªæµ‹è¯•æ–‡ä»¶**
- **172+ å•å…ƒæµ‹è¯•**
- **17 ä¸ª TDD Phase æµ‹è¯•å¥—ä»¶**
- **æ€§èƒ½åŸºå‡†æµ‹è¯•**: OrderBook, æ¶ˆæ¯è§£æ

## ğŸ”§ æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ |
|------|------|
| è¯­è¨€ | Rust 2021 Edition |
| å¼‚æ­¥è¿è¡Œæ—¶ | Tokio |
| ç²¾ç¡®è®¡ç®— | rust_decimal |
| åºåˆ—åŒ– | serde, serde_json, simd-json |
| WebSocket | tokio-tungstenite |
| HTTP | reqwest |
| æ—¥å¿— | log, fern, tracing |
| æµ‹è¯• | mockall, proptest, criterion |
| å¹¶å‘ | dashmap, smallvec |

## ğŸ“ˆ è®¾è®¡åŸåˆ™

1. **ç±»å‹å®‰å…¨**: ä½¿ç”¨ NewType æ¨¡å¼é˜²æ­¢ Price/Size æ··ç”¨
2. **é›¶æ‹·è´**: å°½å¯èƒ½é¿å…ä¸å¿…è¦çš„å†…å­˜åˆ†é…
3. **é«˜æ€§èƒ½**: çº³ç§’çº§è®¢å•ç°¿æ“ä½œï¼Œå¾®ç§’çº§ç­–ç•¥å“åº”
4. **å¯æµ‹è¯•æ€§**: æ‰€æœ‰ç»„ä»¶éƒ½å¯ Mock æµ‹è¯•
5. **æ¨¡å—åŒ–**: ç­–ç•¥ã€é£æ§ã€æ‰§è¡Œå±‚è§£è€¦

## ğŸ“‹ å¼€å‘è¿›åº¦

- [x] Phase 1-12: æ ¸å¿ƒç³»ç»Ÿå®ç°
- [x] Phase 13: å†…éƒ¨æµ‹è¯•ä»£ç æ¸…ç†
- [x] Binance Dry-Run åšå¸‚ç­–ç•¥
- [ ] å®ç›˜äº¤æ˜“æ¨¡å¼
- [ ] Web ç›‘æ§ç•Œé¢
- [ ] æ›´å¤šäº¤æ˜“æ‰€æ”¯æŒ

## ğŸ“„ æ–‡æ¡£

- [æ¶æ„è®¾è®¡](docs/ARCHITECTURE.md)
- [API æ–‡æ¡£](docs/API.md)
- [éƒ¨ç½²æŒ‡å—](docs/DEPLOYMENT.md)
- [æ€§èƒ½ä¼˜åŒ–](docs/PERFORMANCE.md)
- [å®‰å…¨æŒ‡å—](docs/SECURITY.md)

## âš ï¸ å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚åŠ å¯†è´§å¸äº¤æ˜“å…·æœ‰é«˜é£é™©ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚ä½œè€…ä¸å¯¹ä»»ä½•äº¤æ˜“æŸå¤±è´Ÿè´£ã€‚

## ğŸ“œ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**Made with â¤ï¸ in Rust**
